<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smruti's Blog</title>
    <style>
        /* Variables for theme colors - Updated color scheme */
        :root {
            --bg-color: #f5f5f5;
            --card-bg: #ffffff;
            --text-color: #333333;
            --muted-text: #666666;
            --border-color: #e0e0e0;
            --header-color: #2c3e50;
            --accent-color: #3498db;
            --accent-hover: #2980b9;
            --shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }
        
        /* Dark theme colors - Updated */
        [data-theme="dark"] {
            --bg-color: #1a1a2e;
            --card-bg: #282846;
            --text-color: #e0e0e0;
            --muted-text: #b0b0b0;
            --border-color: #444464;
            --header-color: #e0e0e0;
            --accent-color: #4a9ff0;
            --accent-hover: #3d8bd8;
            --shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
        }
        
        /* Base styles */
        * {
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: var(--bg-color);
        }

        header {
            border-bottom: 2px solid var(--accent-color);
            padding-bottom: 20px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .header-content {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        h1 {
            color: var(--header-color);
            margin: 0;
            font-size: 2.2rem;
            font-weight: 700;
        }

        /* Navigation */
        nav ul {
            display: flex;
            list-style: none;
            padding: 0;
            margin: 0;
        }

        nav ul li {
            margin-right: 20px;
        }

        nav ul li a {
            text-decoration: none;
            color: var(--muted-text);
            font-weight: bold;
            transition: color 0.2s;
            padding: 5px 0;
            position: relative;
        }

        nav ul li a:hover {
            color: var(--accent-color);
        }

        nav ul li a:after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 0;
            background-color: var(--accent-color);
            transition: width 0.3s;
        }

        nav ul li a:hover:after {
            width: 100%;
        }

        /* Theme toggle */
        .theme-toggle {
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: var(--text-color);
            background-color: var(--card-bg);
            box-shadow: var(--shadow);
            height: 40px;
            width: 40px;
            transition: transform 0.3s;
        }

        .theme-toggle:hover {
            transform: rotate(15deg);
        }

        /* Welcome message */
        .welcome-message {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            border-left: 5px solid var(--accent-color);
            text-align: center;
        }

        .welcome-message h2 {
            color: var(--accent-color);
            margin-top: 0;
        }

        /* Blog posts */
        .blog-post {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            border-left: 5px solid var(--accent-color);
        }

        .blog-post h2 {
            margin-top: 0;
            color: var(--header-color);
            font-size: 1.8rem;
        }

        .post-meta {
            color: var(--muted-text);
            font-size: 0.9em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .post-meta i {
            margin-right: 5px;
        }

        .post-content {
            margin-bottom: 20px;
        }

        /* New post form */
        #new-post-form {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            display: none;
            border-left: 5px solid var(--accent-color);
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--header-color);
        }

        input, textarea {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: inherit;
        }

        textarea {
            height: 200px;
            resize: vertical;
        }

        button {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }

        button:hover {
            background-color: var(--accent-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .delete-btn {
            background-color: #e74c3c;
            padding: 8px 15px;
            font-size: 0.9em;
        }

        .delete-btn:hover {
            background-color: #c0392b;
        }

        /* Status message */
        .status {
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
        }

        .success {
            background-color: rgba(46, 204, 113, 0.2);
            color: #27ae60;
        }

        .error {
            background-color: rgba(231, 76, 60, 0.2);
            color: #e74c3c;
        }

        footer {
            margin-top: 40px;
            text-align: center;
            color: var(--muted-text);
            font-size: 0.9em;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .blog-post, #new-post-form, .welcome-message {
            animation: fadeIn 0.4s ease-out;
        }

        /* Responsive design */
        @media (max-width: 600px) {
            header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .header-content {
                width: 100%;
                justify-content: space-between;
                margin-bottom: 15px;
            }
            
            nav ul {
                width: 100%;
                justify-content: space-between;
            }
            
            nav ul li {
                margin-right: 0;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>Smruti's Blog</h1>
            <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">
                ☀️
            </button>
        </div>
        <nav>
            <ul>
                <li><a href="#" id="home-link">Home</a></li>
                <li><a href="#" id="new-post-link">New Post</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div id="status-message" class="status" style="display: none;"></div>

        <div class="welcome-message">
            <h2>Welcome to My Personal Corner!</h2>
            <p>Thanks for visiting my blog where I share my thoughts, experiences, and insights. Feel free to browse through my posts or create your own if you'd like to contribute.</p>
            <p>Click on "New Post" to start writing and sharing your ideas!</p>
        </div>

        <form id="new-post-form">
            <h2>Create New Post</h2>
            <div>
                <label for="post-title">Title:</label>
                <input type="text" id="post-title" required placeholder="Enter your post title">
            </div>
            <div>
                <label for="post-author">Author:</label>
                <input type="text" id="post-author" required placeholder="Your name">
            </div>
            <div>
                <label for="post-content">Content:</label>
                <textarea id="post-content" required placeholder="Write your thoughts here..."></textarea>
            </div>
            <button type="submit" id="publish-button">Publish Post</button>
        </form>

        <section id="blog-posts">
            <!-- Sample posts will appear here -->
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Smruti's Blog. All rights reserved.</p>
    </footer>

    <script>
        // DOM elements
        const homeLink = document.getElementById('home-link');
        const newPostLink = document.getElementById('new-post-link');
        const newPostForm = document.getElementById('new-post-form');
        const blogPosts = document.getElementById('blog-posts');
        const statusMessage = document.getElementById('status-message');
        const publishButton = document.getElementById('publish-button');
        const themeToggle = document.getElementById('theme-toggle');
        const htmlElement = document.documentElement;
        const welcomeMessage = document.querySelector('.welcome-message');

        // Sample blog posts
        let posts = [
            {
                title: 'Welcome to Smruti\'s Blog',
                author: 'Smruti',
                date: 'March 14, 2025',
                content: 'Hello and welcome to my blog! I\'m excited to share my journey, thoughts, and experiences with you. This is a space where I\'ll be posting regularly about topics that interest me and hopefully you too. Feel free to explore and engage with my content!'
            },
            {
                title: 'Getting Started with Blogging',
                author: 'Smruti',
                date: 'March 13, 2025',
                content: 'Blogging is an incredible way to express yourself, share knowledge, and connect with like-minded individuals. If you\'re reading this, I encourage you to try writing your own post! Simply click on the "New Post" link in the navigation menu, fill out the form, and click "Publish Post". Your thoughts and contributions are always welcome here.'
            }
        ];

        // Theme toggle functionality
        function toggleTheme() {
            const currentTheme = htmlElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            
            htmlElement.setAttribute('data-theme', newTheme);
            themeToggle.innerHTML = newTheme === 'light' ? '☀️' : '🌙';
            
            // Save theme preference
            localStorage.setItem('blogTheme', newTheme);
        }

        // Load saved theme
        function loadTheme() {
            const savedTheme = localStorage.getItem('blogTheme');
            if (savedTheme) {
                htmlElement.setAttribute('data-theme', savedTheme);
                themeToggle.innerHTML = savedTheme === 'light' ? '☀️' : '🌙';
            }
        }

        // Show status message
        function showStatus(message, isSuccess = true) {
            statusMessage.textContent = message;
            statusMessage.className = isSuccess ? 'status success' : 'status error';
            statusMessage.style.display = 'block';
            
            setTimeout(() => {
                statusMessage.style.display = 'none';
            }, 3000);
        }

        // Load posts from localStorage if available
        function loadPosts() {
            const savedPosts = localStorage.getItem('blogPosts');
            if (savedPosts) {
                try {
                    posts = JSON.parse(savedPosts);
                } catch (e) {
                    console.error("Error loading posts from localStorage:", e);
                    localStorage.removeItem('blogPosts');
                }
            }
            renderPosts();
        }

        // Save posts to localStorage
        function savePosts() {
            try {
                localStorage.setItem('blogPosts', JSON.stringify(posts));
                return true;
            } catch (e) {
                console.error("Error saving posts to localStorage:", e);
                return false;
            }
        }

        // Format date nicely
        function formatDate(dateString) {
            const date = new Date(dateString);
            if (isNaN(date.getTime())) {
                return dateString; // Return original if invalid
            }
            
            return date.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }

// Render all blog posts
function renderPosts() {
    blogPosts.innerHTML = '';
    
    if (posts.length === 0) {
        blogPosts.innerHTML = '<div class="blog-post"><h2>No Posts Yet</h2><p>Create your first post by clicking on "New Post".</p></div>';
        return;
    }
    
    posts.forEach((post, index) => {
        const postElement = document.createElement('article');
        postElement.className = 'blog-post';
        
        // Format the date nicely
        const formattedDate = formatDate(post.date);
        
        postElement.innerHTML = `
            <h2>${post.title}</h2>
            <div class="post-meta">
                <span>By ${post.author} on ${formattedDate}</span>
            </div>
            <div class="post-content">
                ${post.content.replace(/\n/g, '<br>')}
            </div>
            <button class="delete-btn" data-index="${index}">Delete</button>
        `;
        blogPosts.appendChild(postElement);
    });

    // Add event listeners to delete buttons
    document.querySelectorAll('.delete-btn').forEach(button => {
        button.addEventListener('click', function() {
            const index = parseInt(this.getAttribute('data-index'));
            posts.splice(index, 1);
            if (savePosts()) {
                showStatus('Post deleted successfully');
                renderPosts();
            } else {
                showStatus('Error deleting post', false);
            }
        });
    });
}

// Navigation event listeners
homeLink.addEventListener('click', function(e) {
    e.preventDefault();
    welcomeMessage.style.display = 'block';
    blogPosts.style.display = 'block';
    newPostForm.style.display = 'none';
});

newPostLink.addEventListener('click', function(e) {
    e.preventDefault();
    welcomeMessage.style.display = 'none';
    blogPosts.style.display = 'none';
    newPostForm.style.display = 'block';
});

// Form submission
newPostForm.addEventListener('submit', function(e) {
    e.preventDefault();
    console.log("Form submitted");
    
    const titleInput = document.getElementById('post-title');
    const authorInput = document.getElementById('post-author');
    const contentInput = document.getElementById('post-content');
    
    const title = titleInput.value.trim();
    const author = authorInput.value.trim();
    const content = contentInput.value.trim();
    
    if (!title || !author || !content) {
        showStatus('Please fill in all fields', false);
        return;
    }
    
    // Create new post object
    const newPost = {
        title,
        author,
        date: new Date().toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        }),
        content
    };
    
    // Add to posts array
    posts.unshift(newPost);
    
    if (savePosts()) {
        // Reset form and show posts
        newPostForm.reset();
        welcomeMessage.style.display = 'block';
        blogPosts.style.display = 'block';
        newPostForm.style.display = 'none';
        
        showStatus('Post published successfully!');
        
        // Render updated posts
        renderPosts();
    } else {
        showStatus('Error saving post', false);
    }
});

// Theme toggle event listener
themeToggle.addEventListener('click', toggleTheme);

// Additional listener for the publish button
publishButton.addEventListener('click', function(e) {
    console.log("Publish button clicked");
    // The form submit event should handle this, but adding extra handler
    // to ensure the form submission works
    newPostForm.dispatchEvent(new Event('submit'));
});

// Initialize
document.addEventListener('DOMContentLoaded', function() {
    console.log("DOM fully loaded");
    loadTheme();
    loadPosts();
    
    // Show welcome message and posts initially
    welcomeMessage.style.display = 'block';
    blogPosts.style.display = 'block';
    newPostForm.style.display = 'none';
});

// Initialize immediately as well
loadTheme();
loadPosts();
